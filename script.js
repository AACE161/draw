!function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";var r=t("./possible-groups"),o=t("./util"),i=function(){function t(t,e){this.pots=t,this.groups=e;var n=document.createElement("div");n.id="tables-div",this.potsDiv=document.createElement("div"),this.potsDiv.id="pots-div";for(var r=0;r<t.length;++r){var o=t[r],i=document.createElement("table");i.innerHTML="<thead><tr><th>Pot "+(r+1)+"</th></tr></thead><tbody></tbody>";for(var a=i.tBodies[0],s=0;s<o.length;++s){var u=a.insertRow(s).insertCell();u.textContent=o[s].name,void 0!==o[s].pairing&&(u.title="paired with "+o[s].pairing.name)}this.potsDiv.appendChild(i)}this.groupsDiv=document.createElement("div"),this.groupsDiv.id="groups-div";for(var r=0;r<t[0].length;++r){var i=document.createElement("table");i.innerHTML="<thead><tr><th>Group "+String.fromCharCode(65+r)+"</th></tr></thead><tbody></tbody>";for(var a=i.tBodies[0],s=0;s<t.length;++s)a.insertRow(s).insertCell();this.groupsDiv.appendChild(i)}n.appendChild(this.potsDiv),n.appendChild(this.groupsDiv),document.body.appendChild(n);var l=document.createElement("div");l.id="bowls-div",this.teamBowl=document.createElement("div"),this.teamBowl.id="team-bowl",this.teamBowl.classList.add("bowl"),l.appendChild(this.teamBowl),this.announcement=document.createElement("div"),this.announcement.id="announcement",l.appendChild(this.announcement),this.groupBowl=document.createElement("div"),this.groupBowl.id="group-bowl",this.groupBowl.classList.add("bowl"),l.appendChild(this.groupBowl),document.body.appendChild(l),this.currentPotNum=0}return t.prototype.runDraw=function(){if(this.currentPotNum>0||this.groups.some(function(t){return t.length>0})||this.pots.some(function(t){return t.length<8}))throw new Error("cannot start draw");this.fillTeamBowl(),this.announcement.textContent="Pick a ball"},t.prototype.fillTeamBowl=function(){var t=this,e=this.pots[this.currentPotNum],n=e.map(function(n,r){var o=document.createElement("div");return o.classList.add("ball"),o.textContent=e[r].name,o.dataset.team=r.toString(),o.addEventListener("click",function(e){return t.onTeamBallPick(e)}),o});o.shuffle(n).forEach(function(e){return t.teamBowl.appendChild(e)})},t.prototype.onTeamBallPick=function(t){this.teamBowl.style.cursor="not-allowed",this.teamBowl.style.pointerEvents="none";var e=t.target;e.classList.add("picked");for(var n=this.pots[this.currentPotNum],i=0;i<n.length&&n[i].name!==e.textContent;++i);var a=n.splice(i,1)[0],s=r["default"](this.pots,this.groups,a,this.currentPotNum),u=o.getCell(this.potsDiv.children[this.currentPotNum],parseInt(e.dataset.team));u.style.color="#00f",this.announcement.textContent="Possible groups for "+a.name+": "+s.map(function(t){return String.fromCharCode(65+t)}).join(", "),this.fillGroupBowl(s,a,e)},t.prototype.fillGroupBowl=function(t,e,n){var r=this,i=t.map(function(t){var o=document.createElement("div");return o.classList.add("ball"),o.textContent=String.fromCharCode(65+t),o.dataset.group=t.toString(),o.addEventListener("click",function(t){r.teamBowl.removeChild(n);var o=parseInt(t.target.dataset.group);r.animateCell(e,n,o),r.onGroupBallPick(e,o)}),o});o.shuffle(i).forEach(function(t){return r.groupBowl.appendChild(t)})},t.prototype.onGroupBallPick=function(t,e){if(this.groupBowl.innerHTML="",this.announcement.textContent="Group "+String.fromCharCode(65+e)+"!",this.groups[e].push(t),this.teamBowl.style.pointerEvents="auto",this.teamBowl.style.cursor=null,this.teamBowl.onclick=null,!(this.pots[this.currentPotNum].length>0))if(this.potsDiv.children[this.currentPotNum].style.color="#c0c0c0",this.currentPotNum<3)++this.currentPotNum,this.fillTeamBowl(),this.announcement.textContent="Pick a ball";else{var n=this.groupBowl.parentElement;n.removeChild(this.groupBowl),n.removeChild(this.teamBowl),this.announcement.textContent="Draw completed!"}},t.prototype.animateCell=function(t,e,n){var r=o.getCell(this.groupsDiv.children[n],this.currentPotNum),i=o.getCell(this.potsDiv.children[this.currentPotNum],parseInt(e.dataset.team));i.style.color="#c0c0c0";var a=document.createElement("span");document.body.appendChild(a),a.classList.add("fake-cell"),a.style.width=i.offsetWidth+"px",a.style.height=i.offsetHeight+"px",a.textContent=i.textContent,a.style.position="absolute";var s=o.getPos(i);a.style.left=s.x+"px",a.style.top=s.y+"px";var u=o.getElementSize(i,"padding-left"),l=o.getElementSize(i,"padding-top"),c=o.getElementSize(i,"height"),d=o.getElementSize(i,"font-size"),h=new o.Vec2(u+1,l+(c-d)/2),f=o.getPos(r).subtract(s).add(h);o.moveElement(a,h,f,300,function(){document.body.removeChild(a),r.classList.add("team-emerge"),r.textContent=t.name})},t}();n["default"]=i},{"./possible-groups":4,"./util":6}],2:[function(t,e,n){"use strict";function r(t){var e=u("https://cors-inker.c9.io/?url="+encodeURIComponent(t)+"&encoding=latin1",{mode:"cors"})["catch"](function(t){throw new Error("proxy server is down")}).then(function(t){return t.text()}).then(function(t){return o(t)}),n=u("json/pairings.json").then(function(t){return t.json()});return s.all([e,n]).then(function(t){return i(t[0],t[1])})["catch"](function(t){return alert(t.message)})}function o(t){var e=/\s*(.+?)\s+(\*+\d?\s+)?(\w{3})\s+(\d{1,3}\.\d{3})/g;t=t.slice(t.indexOf("Pot 1"));for(var n,r=[];null!==(n=e.exec(t));)r.push(new a["default"](n[1],n[3],parseFloat(n[4])));return r}function i(t,e){e.forEach(function(e){var n=e.map(function(e){for(var n=0;n<t.length;n++){var r=t[n];if(r.name.indexOf(e)>-1)return r}throw new Error("couldn't find team named "+e)});n[0].pairing=n[1],n[1].pairing=n[0]});var n=["Barcelona","Chelsea","Bayern","Juventus","Benfica","Paris","Zenit","PSV"],r=new Array(4);r[0]=n.map(function(e){for(var n=0;n<t.length;n++){var r=t[n];if(r.name.indexOf(e)>-1)return t.splice(t.indexOf(r),1),r}throw new Error("couldn't find team named "+e)}),t.sort(function(t,e){return e.coefficient-t.coefficient});for(var o=1;o<r.length;++o)r[o]=t.splice(0,8);return r}var a=t("./team");"Promise"in window&&"fetch"in window||alert("update your browser");var s=window.Promise,u=window.fetch;n["default"]=r},{"./team":5}],3:[function(t,e,n){"use strict";var r=t("./fetch-parse-pots"),o=t("./draw-visualizer");r["default"]("http://kassiesa.home.xs4all.nl/bert/uefa/seedcl2015.html").then(function(t){var e=new o["default"](t,[[],[],[],[],[],[],[],[]]);e.runDraw()})},{"./draw-visualizer":1,"./fetch-parse-pots":2}],4:[function(t,e,n){"use strict";function r(t,e,n,r){return e.every(function(t){return 0===t.length})?e.map(function(t,e){return e}):i(e,n,r).filter(function(i){e[i].push(n);var a=o(t,e,r);return e[i].pop(),a})}function o(t,e,n){if(0===t[n].length&&(++n,n===t.length))return!0;for(var r=t[n],a=r.pop(),s=!1,u=0,l=i(e,a,n);u<l.length;u++){var c=l[u],d=e[c];if(d.push(a),s=o(t,e,n),d.pop(),s)break}return r.push(a),s}function i(t,e,n){var r=a(t,e,n,0,t.length>>1),o=a(t,e,n,t.length>>1,t.length);return 0===r.length?o:0===o.length?r:r.concat(o)}function a(t,e,n,r,o){for(var i=[],a=r;o>a;++a){for(var s=t[a],u=!0,l=0;l<s.length;l++){var c=s[l];if(c.country===e.country){if(u=!1,c.pairing===e)return[];break}}u&&s.length<=n&&i.push(a)}return i}n["default"]=r},{}],5:[function(t,e,n){"use strict";var r=function(){function t(t,e,n,r){this.name=t,this.country=e,this.coefficient=n,this.pairing=r}return t}();n["default"]=r},{}],6:[function(t,e,n){"use strict";function r(t){if("Notification"in window){var e=window.Notification;if("granted"===e.permission){new e(t)}else"denied"!==e.permission&&e.requestPermission(function(n){if("granted"===n){new e(t)}})}}function o(t){for(var e,n,r=t.length;r;e=Math.floor(Math.random()*r),n=t[--r],t[r]=t[e],t[e]=n);return t}function i(t){for(var e=0,n=0;null!==t;e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent);return new h(e,n)}function a(t,e){return t.tBodies[0].rows[e].cells[0]}function s(t,e,n,r){return new d(function(o,i){o(c["default"](t,e,n,r))})}function u(t,e,n,r,o){function i(s){a||(a=s);var u=s-a,l=u/r,c=n.subtract(e).multiply(l).add(e);t.style.transform="translate3d("+c.x+"px, "+c.y+"px, 0px)",r>u?window.requestAnimationFrame(i):"function"==typeof o&&o()}var a=null;window.requestAnimationFrame(i)}function l(t,e){return Number(window.getComputedStyle(t,null).getPropertyValue(e).match(/(.+?)px/)[1])}var c=t("./possible-groups");n.notify=r,n.shuffle=o,n.getPos=i,n.getCell=a;var d=window.Promise;n.getPossibleGroupsAsync=s;var h=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e)},t}();n.Vec2=h,n.moveElement=u,n.getElementSize=l},{"./possible-groups":4}]},{},[3]);