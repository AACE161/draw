!function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){var r=t("./possible-groups"),o=t("./util"),i=function(){function t(t){var e=this;this.pots=t,this.groups=[];for(var n=0;n<t[0].length;++n)this.groups.push([]);console.log(this.groups),console.log([[],[],[],[],[],[],[],[]]);var r=window.fetch("json/country-names.json").then(function(t){return t.json()}),o=document.createElement("div");o.id="tables-div",this.potsDiv=document.createElement("div"),this.potsDiv.id="pots-div";for(var n=0;n<t.length;++n){var i=t[n],a=document.createElement("table");a.innerHTML="<thead><tr><th>Pot "+(n+1)+"</th></tr></thead><tbody></tbody>";for(var s=a.tBodies[0],l=0;l<i.length;++l){var u=s.insertRow(l).insertCell();u.classList.add("flag"),u.innerHTML=i[l].name,void 0!==i[l].pairing&&(u.title="paired with "+i[l].pairing.name)}this.potsDiv.appendChild(a)}r.then(function(n){for(var r=e.potsDiv.children,o=0;o<r.length;++o)for(var i=e.potsDiv.children[o],a=i.tBodies[0].rows,s=0;s<a.length;++s){var l=a[s].cells[0].style,u=n[t[o][s].country.toLowerCase()].replace(" ","-");l.backgroundImage="url(http://icons.iconarchive.com/icons/gosquared/flag/16/"+u+"-flat-icon.png)"}}),o.appendChild(this.potsDiv),this.groupsDiv=document.createElement("div"),this.groupsDiv.id="groups-div";for(var n=0;n<t[0].length;++n){var a=document.createElement("table");a.innerHTML="<thead><tr><th>Group "+String.fromCharCode(65+n)+"</th></tr></thead><tbody></tbody>";for(var s=a.tBodies[0],l=0;l<t.length;++l)s.insertRow(l).insertCell().classList.add("flag");this.groupsDiv.appendChild(a)}o.appendChild(this.groupsDiv),document.body.appendChild(o);var c=document.createElement("div");c.id="bowls-div",this.teamBowl=document.createElement("div"),this.teamBowl.id="team-bowl",this.teamBowl.classList.add("bowl"),c.appendChild(this.teamBowl),this.announcement=document.createElement("div"),this.announcement.id="announcement",c.appendChild(this.announcement),this.groupBowl=document.createElement("div"),this.groupBowl.id="group-bowl",this.groupBowl.classList.add("bowl"),c.appendChild(this.groupBowl),document.body.appendChild(c),this.currentPotNum=0}return t.prototype.runDraw=function(){if(this.currentPotNum>0||this.groups.some(function(t){return t.length>0})||this.pots.some(function(t){return t.length<8}))throw new Error("cannot start draw");this.fillTeamBowl(),this.announcement.textContent="Pick a ball"},t.prototype.fillTeamBowl=function(){for(var t=this,e=this.pots[this.currentPotNum],n=e.map(function(n,r){var o=document.createElement("div");return o.classList.add("ball"),o.textContent=e[r].name,o.dataset.team=r.toString(),o.addEventListener("click",function(e){return t.onTeamBallPick(e)}),o}),r=0,i=o.shuffle(n);r<i.length;r++){var a=i[r];this.teamBowl.appendChild(a)}},t.prototype.onTeamBallPick=function(t){this.teamBowl.style.cursor="not-allowed",this.teamBowl.style.pointerEvents="none";var e=t.target;e.classList.add("ball-picked");for(var n=this.pots[this.currentPotNum],i=0;i<n.length&&n[i].name!==e.textContent;++i);for(var a=n.splice(i,1)[0],s=r["default"](this.pots,this.groups,a,this.currentPotNum),l=0;l<s.length;l++){var u=s[l],c=o.getCell(this.groupsDiv.children[u],this.currentPotNum);c.classList.add("possible-group")}var d=o.getCell(this.potsDiv.children[this.currentPotNum],parseInt(e.dataset.team));d.classList.add("team-selected"),this.announcement.textContent="Possible groups for "+a.name+": "+s.map(function(t){return String.fromCharCode(65+t)}).join(", "),this.fillGroupBowl(s,a,e)},t.prototype.fillGroupBowl=function(t,e,n){for(var r=this,i=t.map(function(t){var i=document.createElement("div");return i.classList.add("ball"),i.textContent=String.fromCharCode(65+t),i.dataset.group=t.toString(),i.addEventListener("click",function(t){r.teamBowl.removeChild(n);var i=parseInt(t.target.dataset.group),a=o.getCell(r.groupsDiv.children[i],r.currentPotNum),s=o.getCell(r.potsDiv.children[r.currentPotNum],parseInt(n.dataset.team));s.classList.remove("team-selected"),s.classList.add("greyed"),o.animateCell(s,a,300).then(function(){a.classList.remove("possible-group"),a.classList.add("team-emerge")}),r.onGroupBallPick(e,i)}),i}),a=0,s=o.shuffle(i);a<s.length;a++){var l=s[a];this.groupBowl.appendChild(l)}},t.prototype.onGroupBallPick=function(t,e){this.groupBowl.innerHTML="",this.announcement.textContent="Group "+String.fromCharCode(65+e)+"!",this.groups[e].push(t),this.teamBowl.style.pointerEvents="auto",this.teamBowl.style.cursor="default",this.teamBowl.onclick=null;for(var n=this.groupsDiv.children,r=0;r<n.length;++r)r!==e&&o.getCell(n[r],this.currentPotNum).classList.remove("possible-group");if(!(this.pots[this.currentPotNum].length>0))if(this.potsDiv.children[this.currentPotNum].tHead.classList.add("greyed"),this.currentPotNum<3)++this.currentPotNum,this.fillTeamBowl(),this.announcement.textContent="Pick a ball";else{var i=this.groupBowl.parentElement;i.removeChild(this.groupBowl),i.removeChild(this.teamBowl),this.announcement.textContent="Draw completed!"}},t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"./possible-groups":4,"./util":6}],2:[function(t,e,n){function r(t){var e=encodeURIComponent(t),n=c("https://proxy-antonv.rhcloud.com/?url="+e+"&encoding=latin1").then(function(t){return t.text()})["catch"](function(e){return c("https://crossorigin.me/"+t).then(function(t){return t.text()}).then(function(t){return l.convertBadName(t)})})["catch"](function(t){return alert("proxies are down")}).then(function(t){return o(t)}),r=c("json/pairings.json").then(function(t){return t.json()});return u.all([n,r]).then(function(t){return i(t[0],t[1])}).then(function(t){return a(t)})["catch"](function(t){return alert(t.message)})}function o(t){var e=/\s*(.+?)\s+(\*+\d?\s+)?(\w{3})\s+(\d{1,3}\.\d{3})/g;t=t.slice(t.indexOf("Pot 1"));for(var n,r=[];null!==(n=e.exec(t));)r.push(new s["default"](n[1],n[3],parseFloat(n[4])));return r}function i(t,e){return e.forEach(function(e){var n=e.map(function(e){for(var n=0;n<t.length;n++){var r=t[n];if(r.name.indexOf(e)>-1)return r}throw new Error("couldn't find team named "+e)});n[0].pairing=n[1],n[1].pairing=n[0]}),t}function a(t){var e=["Barcelona","Chelsea","Bayern","Juventus","Benfica","Paris","Zenit","PSV"],n=new Array(4);n[0]=e.map(function(e){for(var n=0;n<t.length;n++){var r=t[n];if(r.name.indexOf(e)>-1)return t.splice(t.indexOf(r),1),r}throw new Error("couldn't find team named "+e)}),t.sort(function(t,e){return e.coefficient-t.coefficient});for(var r=1;r<n.length;++r)n[r]=t.splice(0,8);return n}var s=t("./team"),l=t("./util");"Promise"in window&&"fetch"in window||alert("The draw simulation only works in Chrome, Opera & Firefox.");var u=window.Promise,c=window.fetch;Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{"./team":5,"./util":6}],3:[function(t,e,n){var r=t("./fetch-parse-pots"),o=t("./draw-visualizer");r["default"]("http://kassiesa.home.xs4all.nl/bert/uefa/seedcl2015.html").then(function(t){var e=new o["default"](t);e.runDraw()})},{"./draw-visualizer":1,"./fetch-parse-pots":2}],4:[function(t,e,n){function r(t,e,n,r){return e.every(function(t){return 0===t.length})?e.map(function(t,e){return e}):i(e,n,r).filter(function(i){e[i].push(n);var a=o(t,e,r);return e[i].pop(),a})}function o(t,e,n){if(0===t[n].length&&(++n,n===t.length))return!0;for(var r=t[n],a=r.pop(),s=!1,l=0,u=i(e,a,n);l<u.length;l++){var c=u[l],d=e[c];if(d.push(a),s=o(t,e,n),d.pop(),s)break}return r.push(a),s}function i(t,e,n){var r=a(t,e,n,0,t.length>>1),o=a(t,e,n,t.length>>1,t.length);return 0===r.length?o:0===o.length?r:r.concat(o)}function a(t,e,n,r,o){for(var i=[],a=r;o>a;++a){for(var s=t[a],l=!0,u=0;u<s.length;u++){var c=s[u];if(c.country===e.country){if(l=!1,c.pairing===e)return[];break}}l&&s.length<=n&&i.push(a)}return i}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],5:[function(t,e,n){var r=function(){function t(t,e,n,r){this.name=t,this.country=e,this.coefficient=n,this.pairing=r}return t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],6:[function(t,e,n){function r(t){for(var e,n,r=t.length;r;e=Math.floor(Math.random()*r),n=t[--r],t[r]=t[e],t[e]=n);return t}function o(t,e){return t.tBodies[0].rows[e].cells[0]}function i(t){return t.replace(/Malm./,"Malmö").replace(/Borussia M.nchengladbach/,"Borussia Mönchengladbach").replace(/Atl.tico/,"Atlético").replace(/Bayern M.nchen/,"Bayern München")}function a(t,e,n){return new window.Promise(function(r){var o=document.createElement("td");o.style.opacity=null,o.style.position="absolute",o.textContent=t.textContent;for(var i=getComputedStyle(t),a=0,s=["width","border","padding","padding-left","background","background-image","background-repeat"];a<s.length;a++){var l=s[a];o.style[l]=i[l]}var u=t.getBoundingClientRect();o.style.transform="translate("+u.left+"px, "+u.top+"px)",o.style.height=u.height-5+"px",o.style.borderColor="rgba(0,0,0,0)",o.style.paddingTop="3px",document.body.appendChild(o);var c=e.getBoundingClientRect();o.style.transition="transform "+n+"ms ease-in-out",o.style.transform="translate3d("+c.left+"px, "+c.top+"px, 0px)",setTimeout(function(){document.body.removeChild(o),e.textContent=t.textContent,e.style.backgroundImage=t.style.backgroundImage,r()},n)})}n.shuffle=r,n.getCell=o,n.convertBadName=i,n.animateCell=a},{}]},{},[3]);